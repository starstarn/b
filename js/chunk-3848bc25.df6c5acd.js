(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3848bc25"],{bb51:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.category?a("div",{staticClass:"page"},[a("div",{staticClass:"navbar-wrapper"},[a("NavBar",{attrs:{userInfo:e.model}})],1),a("div",{staticClass:"video-wrapper"},[a("div",{staticClass:"edit-category",on:{click:e.editCategory}},[a("van-icon",{attrs:{name:"setting-o",size:"5vw",color:"#666"}})],1),e._v(" "),a("van-tabs",{attrs:{swipeable:"",animated:"","swipe-threshold":"4",sticky:"",color:e.biliColor},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.category,(function(t,n){return a("van-tab",{key:n,attrs:{title:t.title}},[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1,offset:"50"},on:{load:e.loadMore},model:{value:t.loading,callback:function(a){e.$set(t,"loading",a)},expression:"item.loading"}},[a("div",{staticClass:"video-item-wrapper"},e._l(t.content,(function(t,n){return a("video-item",{key:n,staticClass:"video-item",attrs:{videoInfo:t},on:{videoClick:e.onVideoClick}})})),1)])],1)})),1)],1)]):e._e()},r=[],o=(a("d81d"),a("2909")),i=(a("96cf"),a("1da1")),c=a("0790"),s=a("5fdc"),l={components:{NavBar:c["a"],VideoItem:s["a"]},data:function(){return{model:null,category:[],active:0,biliColor:"#fb7299"}},activated:function(){this.getCategory(),localStorage.getItem("token")&&localStorage.getItem("id")&&this.getUserInfo(),this.getCategory()},methods:{loadMore:function(){var e=this,t=this.category[this.active];setTimeout((function(){t.page+=1,e.getContent(),t.loading=!1}),1e3)},getUserInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/user/"+localStorage.getItem("id"));case 2:a=t.sent,e.model=a.data[0];case 4:case"end":return t.stop()}}),t)})))()},getCategory:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!localStorage.getItem("category")){t.next=6;break}a=JSON.parse(localStorage.getItem("category")),console.log(a),e.category=a,t.next=10;break;case 6:return t.next=8,e.$http.get("/category");case 8:n=t.sent,e.category=n.data;case 10:e.category.map((function(t){e.$set(t,"content",[]),e.$set(t,"page",0),e.$set(t,"pagesize",10),e.$set(t,"loading",!1),e.$set(t,"finished",!1)})),e.getContent();case 12:case"end":return t.stop()}}),t)})))()},getContent:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.category[e.active],n){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.$http.get("/detail/"+n._id,{params:{page:n.page,pagesize:n.pagesize}});case 5:r=t.sent,console.log(n),(a=n.content).push.apply(a,Object(o["a"])(r.data)),r.data.length<n.pagesize&&(n.finished=!0);case 9:case"end":return t.stop()}}),t)})))()},onVideoClick:function(e){this.$router.push("/videoDetail/"+e)},editCategory:function(){this.$router.push("/editcategory")}},mounted:function(){localStorage.getItem("token")&&localStorage.getItem("id")&&this.getUserInfo(),this.getCategory()},watch:{active:function(){this.getContent()}}},u=l,g=(a("c2f2"),a("2877")),d=Object(g["a"])(u,n,r,!1,null,"28cd2af4",null);t["default"]=d.exports},c2f2:function(e,t,a){"use strict";a("dc0f")},d81d:function(e,t,a){"use strict";var n=a("23e7"),r=a("b727").map,o=a("1dde"),i=a("ae40"),c=o("map"),s=i("map");n({target:"Array",proto:!0,forced:!c||!s},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},dc0f:function(e,t,a){}}]);
//# sourceMappingURL=chunk-3848bc25.df6c5acd.js.map