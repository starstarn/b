{"version":3,"sources":["webpack:///./src/views/Home.vue?15fd","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?2b8c","webpack:///./src/views/Home.vue","webpack:///./src/views/Home.vue?1cd0","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","model","on","editCategory","_v","biliColor","value","callback","$$v","active","expression","_l","item","i","key","title","finished","loadMore","$set","video","index","onVideoClick","_e","staticRenderFns","components","NavBar","VideoItem","data","category","activated","getCategory","localStorage","getItem","getUserInfo","methods","setTimeout","targetItem","page","loading","$router","push","videoId","mounted","watch","getContent","component","$","$map","map","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","target","proto","forced","callbackfn","arguments","length","undefined"],"mappings":"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","file":"js/chunk-3848bc25.df6c5acd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.category)?_c('div',{staticClass:\"page\"},[_c('div',{staticClass:\"navbar-wrapper\"},[_c('NavBar',{attrs:{\"userInfo\":_vm.model}})],1),_c('div',{staticClass:\"video-wrapper\"},[_c('div',{staticClass:\"edit-category\",on:{\"click\":_vm.editCategory}},[_c('van-icon',{attrs:{\"name\":\"setting-o\",\"size\":\"5vw\",\"color\":\"#666\"}})],1),_vm._v(\" \"),_c('van-tabs',{attrs:{\"swipeable\":\"\",\"animated\":\"\",\"swipe-threshold\":\"4\",\"sticky\":\"\",\"color\":_vm.biliColor},model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},_vm._l((_vm.category),function(item,i){return _c('van-tab',{key:i,attrs:{\"title\":item.title}},[_c('van-list',{attrs:{\"finished\":item.finished,\"finished-text\":\"没有更多了\",\"immediate-check\":false,\"offset\":\"50\"},on:{\"load\":_vm.loadMore},model:{value:(item.loading),callback:function ($$v) {_vm.$set(item, \"loading\", $$v)},expression:\"item.loading\"}},[_c('div',{staticClass:\"video-item-wrapper\"},_vm._l((item.content),function(video,index){return _c('video-item',{key:index,staticClass:\"video-item\",attrs:{\"videoInfo\":video},on:{\"videoClick\":_vm.onVideoClick}})}),1)])],1)}),1)],1)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"page\" v-if=\"category\">\n    <div class=\"navbar-wrapper\">\n      <NavBar :userInfo=\"model\" />\n    </div>\n    <div class=\"video-wrapper\">\n      <div class=\"edit-category\" @click=\"editCategory\">\n        <van-icon name=\"setting-o\" size=\"5vw\" color=\"#666\" />\n      </div>  <!-- swipeable滑动切换 -->\n      <van-tabs v-model=\"active\" swipeable animated swipe-threshold=\"4\" sticky :color=\"biliColor\">\n        <van-tab v-for=\"(item, i) in category\" :title=\"item.title\" :key=\"i\">\n          <van-list\n            v-model=\"item.loading\"\n            :finished=\"item.finished\"\n            finished-text=\"没有更多了\"\n            @load=\"loadMore\"\n            :immediate-check=\"false\"\n            offset=\"50\"\n          >\n            <div class=\"video-item-wrapper\">\n              <video-item\n                v-for=\"(video, index) in item.content\"\n                :videoInfo=\"video\"\n                :key=\"index\"\n                class=\"video-item\"\n                @videoClick=\"onVideoClick\"\n              ></video-item>\n            </div>\n          </van-list>\n        </van-tab>\n      </van-tabs>\n    </div>\n  </div>\n</template>\n\n<script>\nimport NavBar from \"@/components/common/NavBar\";\nimport VideoItem from \"@/components/VideoItem\";\nexport default {\n  components: {\n    NavBar,\n    VideoItem,\n  },\n  data() {\n    return {\n      model: null,\n      category: [],\n      active: 0,\n      biliColor: \"#fb7299\"\n    };\n  },\n  // keep-alive时，更新数据\n  activated() {\n    this.getCategory();\n    if (localStorage.getItem(\"token\") && localStorage.getItem(\"id\")) {\n      this.getUserInfo();\n    }\n    this.getCategory();\n  },\n  methods: {\n    loadMore() {\n      const targetItem = this.category[this.active];\n      setTimeout(() => {\n        targetItem.page += 1;\n        this.getContent();\n        targetItem.loading = false;\n      }, 1000);\n    },\n    async getUserInfo() {\n      const res = await this.$http.get(\"/user/\" + localStorage.getItem(\"id\"));\n      this.model = res.data[0];\n    },\n    async getCategory() {\n      // 先获取本地数据\n      if (localStorage.getItem(\"category\")) {\n        let localCategory = JSON.parse(localStorage.getItem(\"category\"));\n        console.log(localCategory);\n        this.category = localCategory;\n      } else {\n        const res = await this.$http.get(\"/category\");\n        this.category = res.data;\n      }\n\n      //   记录获取数量和起始\n      this.category.map((item) => {\n        this.$set(item, \"content\", []);\n        this.$set(item, \"page\", 0);\n        this.$set(item, \"pagesize\", 10);\n        this.$set(item, \"loading\", false);\n        this.$set(item, \"finished\", false);\n      });\n      //   获取首页内容\n      this.getContent();\n    },\n\n    async getContent() {\n      const targetItem = this.category[this.active];\n      if (!targetItem) {\n        return;\n      }\n      const res = await this.$http.get(\"/detail/\" + targetItem._id, {\n        params: {\n          page: targetItem.page, //每页的\n          pagesize: targetItem.pagesize, //每页的个数\n        },\n      });\n      //   新属性添加响应\n      //   this.$set(targetItem, \"content\", res.data);\n      console.log(targetItem);\n      targetItem.content.push(...res.data); //可以复用\n      if (res.data.length < targetItem.pagesize) {\n        targetItem.finished = true;\n      }\n    },\n    onVideoClick(videoId) {\n      this.$router.push(\"/videoDetail/\" + videoId);\n    },\n    editCategory() {\n      this.$router.push(\"/editcategory\");\n    },\n  },\n  mounted() {\n    if (localStorage.getItem(\"token\") && localStorage.getItem(\"id\")) {\n      this.getUserInfo();\n    }\n    this.getCategory();\n  },\n  watch: {\n    active() {\n      this.getContent();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.item-status {\n  position: fixed;\n  border: 1px solid red;\n  left: 0;\n  top: 0;\n  z-index: 8;\n}\n.page {\n  background: white;\n}\n.navbar-wrapper {\n}\n.video-wrapper {\n  position: relative;\n  .video-item-wrapper {\n    margin-top: 0.833vw;\n    display: flex;\n    flex-wrap: wrap;\n  }\n  .edit-category {\n    // border: 1px solid red;\n    width: 9.722vw;\n    height: 43px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background: white;\n    position: absolute;\n    z-index: 1;\n    right: 0;\n    top: 0;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=28cd2af4&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=28cd2af4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28cd2af4\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=28cd2af4&lang=scss&scoped=true&\"","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}